const express = require('express');
const bodyParser = require('body-parser');
const cors = require('cors');
const app = express();

var currentUser;

var corsOptions = {
  orgim: '/',
  optionsSuccessStatus: 200
}

app.use(cors(corsOptions));
app.use(bodyParser.json());

app.listen(3100, () => {
  console.log('Server Started!');
});

app.route('/api/courses').get((request, response) => {
  response.send(COURSES);
});

app.route('/api/courses').post((request, response) => {
  let course = request.body;

  const firstId = COURSES ? Math.max.apply(null, COURSES.map(courseIterator => courseIterator.id)) + 1 : 1;
  course.id = firstId;
  COURSES.push(course);
  

  response.status(201).send(course);
});

app.route('/api/courses/:id').put((request, response) => {
  const courseId = +request.params['id'];
  const course = request.body;

  const index = COURSES.findIndex(courseIterator => courseIterator.id === courseId);
  COURSES[index] = course;

  response.status(200).send(course);
});

app.route('/api/courses/:id').get((request, response) => {
  const courseId = +request.params['id'];

  response.status(200).send(COURSES.find(courseIterator => courseIterator.id === courseId));
});

app.route('/api/courses/:id').delete((request, response)=> {
  const courseId = +request.params['id'];
  COURSES = COURSES.filter(courseIterator => courseIterator.id !== courseId);
  
  response.status(204).send({});
});

var COURSES = [
  {
      id: 1,
      name: 'Miguel',
      cpf: 51836904215,
      cidade: 'Várzea Grande',
      endereco: 'Rua dos Tico-Ticos',
      bairro: 'Cristo Rei',
      numerocasa: 1000,
      cep: 78118-572,
      estado:'MG',
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'Individual',
      pacote: '1 Semana',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 2,
      name: 'Sophia',
      cpf: 40398588597,
      cidade: 'Limeira',
      endereco: 'Avenida Eduardo Peixoto',
      bairro: 'Jardim Nova Europa',
      numerocasa: 1001,
      cep: 13482-000,
      estado:'São Paulo',
      quantidadeDias: 14 ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semana',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 3,
      name: 'Davi',
      cpf: 76358635689,
      cidade: 'Maceió',
      endereco: 'Rua Ana Nery',
      bairro: 'Ponta da Terra',
      numerocasa: 1002,
      cep: 57030-632,
      estado:'Alagoas',
      quantidadeDias: 30 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Mensal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 4,
      name: 'Alice',
      cpf: 38378235203,
      cidade: 'Gurinhém',
      endereco: 'Rua Flávio Ribeiro 90',
      bairro: 'Centro',
      numerocasa: 1003,
      cep: 58356970,
      estado:'Gurinhém',
      quantidadeDias: 5 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'nenhum',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 5,
      name: 'Arthur',
      cpf: 78512295104,
      cidade: 'Campo Grande',
      endereco: 'Travessa Torres',
      bairro: 'Monte Castelo',
      numerocasa: 1004,
      cep: 79010-173,
      estado:'Mato Grosso do Sul',
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'IndividualSemanal',
      pacote: '',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 6,
      name: 'Julia',
      cpf: 27319891573,
      cidade: 'São Luís',
      endereco: 'Rua José Sarney',
      bairro: 'Vila Itamar II',
      numerocasa: 1005,
      cep: 65090040,
      estado:'Maranhão',
      quantidadeDias: 14 ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semana',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 7,
      name: ' Pedro',
      cpf: 78840948864,
      cidade: 'Imperatriz',
      endereco: 'Rua Visconde de Mauá',
      bairro: 'Vila Independente',
      numerocasa: 1006,
      cep: 65914030,
      estado:'Maranhão',        
      quantidadeDias: 30 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Mensal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 8,
      name: ' Isabella',
      cpf: 37788529737,
      cidade: 'Rondonópolis',
      endereco: 'Rua Domingos de Lima',
      bairro: 'Loteamento Kennedy',
      numerocasa: 1007,
      cep: 78700411,
      estado:'Mato Grosso',        
      quantidadeDias: 3 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Nenhum',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 9,
      name: 'Gabriel',
      cpf: 77220832850,
      cidade: 'Aracaju',
      endereco: 'Rua Olinda Araújo',
      bairro: 'Farolândia',
      numerocasa: 1008,
      cep: 49030800,
      estado:'Sergipe',        
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Semanal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 10,
      name: 'Manuela',
      cpf: 78786458175,
      cidade: 'Tubarão',
      endereco: 'Rua Osvaldo Cruz',
      bairro: 'Centro',
      numerocasa: 1009,
      cep: 88701-060,
      estado:'Santa Catarina',
      quantidadeDias: 14 ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semana',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 11,
      name: 'Bernardo',
      cpf: 54951157594,
      cidade: 'Dourados',
      endereco: 'Corredor Público Q',
      bairro: 'Parque Residencial Pelicano',
      numerocasa: 1010,
      cep: 79833-630,
      estado:'Mato Grosso do Sul',
      quantidadeDias: 30 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Mensal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 12,
      name: ' Laura',
      cpf: 45130755626,
      cidade: 'Salvador',
      endereco: '2ª Travessa Comodoro',
      bairro: 'São Marcos',
      numerocasa: 1011,
      cep: 41250610,
      estado:'Salvador',        
      quantidadeDias: 16 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Nenhum',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 13,
      name: 'Lucas',
      cpf: 27613595595,
      cidade: 'Maracanaú',
      endereco: 'Rua J',
      bairro: 'Luzardo Viana',
      numerocasa: 1012,
      cep: 61910390,
      estado:'Ceará',        
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Semanal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 14,
      name: 'Luiza',
      cpf: 38759273380,
      cidade: 'Novo Hamburgo',
      endereco: 'Rua Jacinto',
      bairro: 'São José',
      numerocasa: 1013,
      cep: 93534-170,
      estado:'Rio Grande do Sul',
      quantidadeDias: 14 ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semanas',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 15,
      name: 'Matheus',
      cpf: 13822081388,
      cidade: 'Porto Velho',
      endereco: 'Rua Larimar',
      bairro: 'Jardim Santana',
      numerocasa: 1014,
      cep: 76828-034,
      estado:'Rondonia',
      quantidadeDias: 30 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Mensal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 16,
      name: 'Valentina',
      cpf: 14381542754,
      cidade: 'Parnaíba',
      endereco: 'Rua Jeremias Nogueira Pereira da Silva',
      bairro: 'Reis Veloso',
      numerocasa: 1015,
      cep: 57085-615,
      estado:'Piauí',
      quantidadeDias: 28 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Nenhum',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 17,
      name: ' Rafael',
      cpf: 22917814136,
      cidade: 'Barbalha',
      endereco: 'Avenida Senador Vitorino Freire',
      bairro: 'Lira',
      numerocasa: 1016,
      cep: 49015-250,
      estado:'Ceará',
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Semanal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 18,
      name: 'Giovanna',
      cpf: 67326463115,
      cidade: 'Ariquemes',
      endereco: 'Rua Ingazeiro',
      bairro: 'Setor 01',
      numerocasa: 1017,
      cep: 12904-140,
      estado:'Rondonia',
      quantidadeDias: 14 ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semanas',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 19,
      name: ' Heitor',
      cpf: 81498845720,
      cidade: 'São Paulo',
      endereco: 'Rua Padre Viegas de Menezes 349',
      bairro: 'Itaquera',
      numerocasa: 1018,
      cep: 88810-322,
      estado:'São Paulo',
      quantidadeDias: 30 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Mensal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 20,
      name: 'Maria Eduarda',
      cpf: 22624162577,
      cidade: 'Boa Vista',
      endereco: 'Rua Closvaldo Paes Carolino',
      bairro: 'Santa Luzia',
      numerocasa: 1019,
      cep: 59030-640,
      estado:'Santa Catarina',
      quantidadeDias: 10 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Nenhum',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 21,
      name: 'Enzo',
      cpf: 89138433664,
      cidade: 'Londrina',
      endereco: 'Rua João Soares',
      bairro: 'Jardim Everest',
      numerocasa: 1020,
      cep: 69918-752,
      estado:'Santa Catarina',
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Semanal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 22,
      name: 'Helena',
      cpf: 43919968808,
      cidade: 'Aroeiras do Itaim',
      endereco: 'Rua Projetada, s/n',
      bairro: 'Centro',
      numerocasa: 1021,
      cep: 70200-670,
      estado:'Piaui',
      Quantidadededias: '14' ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semanas',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 23,
      name: ' Guilherme',
      cpf: 51896581714,
      cidade: 'Porto Velho',
      endereco: 'Rua Pio XII',
      bairro: 'Pedrinhas',
      numerocasa: 1022,
      cep: 69101-826,
      estado:'Rondonia',
      quantidadeDias: 30 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Mensal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 24,
      name: 'Beatriz',
      cpf: 89151413264,
      cidade: 'Rio Verde',
      endereco: 'Rua 18',
      bairro: 'Nova Vila Maria',
      numerocasa: 1023,
      cep: 58706-050,
      estado:'Goiás',
      quantidadeDias: 8 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Nenhum',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 25,
      name: 'Nicolas',
      cpf: 26442646181,
      cidade: 'Várzea Grande',
      endereco: 'Rua Alencar de Lannes',
      bairro: 'Glória',
      numerocasa: 1024,
      cep: 29704-070,
      estado:'Mato Grosso',
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Semanal    ',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 26,
      name: ' Maria Luiza',
      cpf: 77243266908,
      cidade: 'Pelotas',
      endereco: 'Avenida Alfredo Augusto Assumpção',
      bairro: 'Laranjal',
      numerocasa: 1025,
      cep: 49044-502,
      estado:'Rio Grande do Sul',
      quantidadeDias: 14 ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semanas',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 27,
      name: 'Lorenzo',
      cpf: 75811557493,
      cidade: 'Marabá',
      endereco: 'Quadra Dez',
      bairro: 'Nova Marabá',
      numerocasa: 1026,
      cep: 76909-800,
      estado:'Pará',
      quantidadeDias: 30 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Mensal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 28,
      name: 'Lara',
      cpf: 44369276608,
      cidade: 'Fortaleza',
      endereco: 'Alameda das Orquídeas',
      bairro: 'Cidade 2000',
      numerocasa: 1027,
      cep: 26040-730,
      estado:'Ceará',
      quantidadeDias: 6 ,
      opcaoDeQuarto: 'Individual',
      pacote: 'Nenhum',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 29,
      name: 'Gustavo',
      cpf: 44656140392,
      cidade: 'Caucaia',
      endereco: 'Rua Dona Elisa',
      bairro: 'Iparana',
      numerocasa: '',
      cep: 58038-210,
      estado:'Ceará',
      quantidadeDias: 7 ,
      opcaoDeQuarto: 'Individual0',
      pacote: 'Semanal',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
  {
      id: 30,
      name: 'Mariana',
      cpf: 56684247319,
      cidade: 'Florianópolis',
      endereco: 'Servidão João Jorge',
      bairro: 'Armação do Pântano do Sul',
      numerocasa: 1029,
      cep: 88066-320,
      estado:'Santa Catarina',
      quantidadeDias: 14 ,
      opcaoDeQuarto: 'Individual',
      pacote: '2 Semanas',
      precoDiaria: 200.00,
      precoTotal: '',        
  },
];